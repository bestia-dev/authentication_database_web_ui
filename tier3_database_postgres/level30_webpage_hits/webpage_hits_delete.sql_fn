-- tier3_database_postgres/level30_webpage_hits/webpage_hits_delete.sql_fn

select a_migrate_function('webpage_hits_delete',
$source_code$

create function webpage_hits_delete(
_id integer)
returns table(deleted_rows integer) 
language plpgsql as
$$
declare
begin

delete from hit_counter h
where h.webpage_id = _id;

delete from webpage w
where w.id = _id;

return query 
select 1 as deleted_rows;

end; 
$$;

$source_code$);